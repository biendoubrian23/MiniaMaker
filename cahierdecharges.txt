je vais utiliser nano banana de gemini
et utlise ce model: gemini-3-pro-image-preview (a utiliser absolument)


Voici un cahier des charges ultra-clair, structurÃ©, complet et orientÃ© pour Claude Opus, afin quâ€™il puisse coder une application Next.js qui gÃ©nÃ¨re des miniatures (thumbnails) avec :

Upload de visage

Upload dâ€™image dâ€™inspiration

Upload dâ€™image extra (objet / outil)

Zone de prompt

Bouton de gÃ©nÃ©ration

Preview des miniatures gÃ©nÃ©rÃ©es

UI simple, Ã©purÃ©e, angles droits, fond blanc clair

ğŸ“˜ CAHIER DES CHARGES â€” Application Web â€œThumbnail Generatorâ€
1. Objectif du projet

CrÃ©er une application web Next.js permettant de gÃ©nÃ©rer des miniatures personnalisÃ©es via un modÃ¨le dâ€™IA.
Lâ€™utilisateur fournit :

Son visage

Une image dâ€™inspiration qui reprÃ©sente le style souhaitÃ©

Une image supplÃ©mentaire (objet, outil, symboleâ€¦)

Un prompt dÃ©crivant prÃ©cisÃ©ment ce que lâ€™IA doit produire

Lâ€™IA renvoie une ou plusieurs miniatures inspirÃ©es par ces Ã©lÃ©ments.

ğŸ“ 2. Stack Technique

Framework principal : Next.js 14 (App Router)

UI / styling : Tailwind CSS

Composants UI : Aucun kit IA, design propriÃ©taire

Gestion des uploads : Uploadthing ou next-safe-uploader

Appels IA : via route API /api/generate

ğŸ¨ 3. Ligne directrice du Design (exigences UI)
Style global

Fond : Blanc #FFFFFF ou trÃ¨s clair #F8F9FA

Angles : Tous les containers avec angles droits (pas de rounded)

Look : Ultra Ã©purÃ©

Aucune icÃ´ne IA connue (pas de robots, pas dâ€™icÃ´ne de cerveau, pas de style clichÃ© IA)

Typographie : Sans-serif moderne (Inter ou Manrope)

Structure de la page (layout)

Section Uploads (3 uploads)

Section Prompt

Section â€œOptions de gÃ©nÃ©rationâ€

Section â€œMiniatures gÃ©nÃ©rÃ©esâ€

Composants Ã  crÃ©er

Card carrÃ©e avec bord gris lÃ©ger (#E5E7EB)

Dropzone personnalisÃ©e

Boutons rectangulaires (no rounded)

Loader simple (spinner minimaliste)

ğŸ“ 4. Structure des fichiers (obligatoire pour Claude)
/app
  /page.tsx
  /api
    /generate
      route.ts
/components
  UploadBox.tsx
  PromptBox.tsx
  GeneratedGrid.tsx
  Header.tsx
  Button.tsx
/lib
  ai.ts
  validate.ts
/public
  /placeholders

ğŸ–¼ï¸ 5. FonctionnalitÃ©s dÃ©taillÃ©es
5.1. Upload de fichiers
Exigences :

3 uploads distincts :

â€œFace Imageâ€

â€œInspiration Imageâ€

â€œExtra Imageâ€

Chaque upload accepte :

.png, .jpg, .jpeg, .webp

Taille max : 10 Mo

PrÃ©visualisation affichÃ©e immÃ©diatement

PossibilitÃ© de remplacer lâ€™image

Interface :

BoÃ®te carrÃ© avec bord gris, texte â€œUpload your imageâ€

Fond blanc

Drag & drop + clic simple

5.2. Champ Prompt
Exigences :

Texte multiligne

Minimum 10 caractÃ¨res

Compteur de caractÃ¨res affichÃ©

Placeholder : â€œDÃ©crivez la miniature Ã  gÃ©nÃ©rerâ€¦â€

5.3. ParamÃ¨tres de gÃ©nÃ©ration

Choix du nombre dâ€™images Ã  gÃ©nÃ©rer : 1, 2, 3 ou 4

Bouton â€œGenerateâ€

5.4. Appel API /api/generate

Claude doit Ã©crire une route API qui recevra :

{
  faceImageUrl: string;
  inspirationImageUrl: string;
  extraImageUrl: string;
  prompt: string;
  count: number;
}

Traitement attendu :

Envoi Ã  un modÃ¨le IA dâ€™image (Anthropic, SDXL, Flux, ce que tu veux)

Fusion des trois images + prompt dans le prompt final

Retourner un tableau dâ€™URLs dâ€™images gÃ©nÃ©rÃ©es

Format de rÃ©ponse :

{ images: string[] }


Gestion des erreurs :

Retour 400 si un champ est manquant

Retour 500 en cas dâ€™Ã©chec IA

5.5. Affichage des miniatures gÃ©nÃ©rÃ©es

Grid responsive (2 ou 3 colonnes)

Fond blanc

Contours gris trÃ¨s lÃ©ger

Zoom lÃ©ger au hover (scale 1.03)

Bouton â€œTÃ©lÃ©chargerâ€

ğŸ§± 6. Contraintes que Claude doit respecter pour la qualitÃ© du code
Code propre & structurÃ©

Utiliser des composants rÃ©utilisables

Utiliser TypeScript strict

DÃ©couper en composant (pas de monolithes)

Commentaires utiles aux endroits complexes

Performances

Pas de rerender inutiles

Server actions ou API route propre

Compression des images avant envoi si possible

SÃ©curitÃ©

Validation des fichiers (format, taille)

DÃ©sactiver les extensions dangereuses

VÃ©rifier les champs cÃ´tÃ© client + serveur

UI

Style minimal, pas dâ€™images de robots, pas dâ€™effet cartoon IA

Pas de border-radius

ğŸ§ª 7. Tests (unit + e2e)

Claude doit :

Tester la route /api/generate

Tester les composants :

Upload

Prompt

Grid

VÃ©rifier les erreurs :

Upload manquant

Prompt vide

API down

ğŸš€ 8. FonctionnalitÃ©s Ã  dÃ©velopper plus tard (roadmap)

GÃ©nÃ©ration vidÃ©o

Sauvegarde des miniatures dans un compte utilisateur

Historique des prompts

Mode â€œtemplateâ€ de miniature YouTube

ğŸ“¦ Document final Ã  envoyer Ã  Claude

Voici ce que tu dois remettre tel quel Ã  Claude :

â€œCode une application Next.js 14 conforme Ã  ce cahier des charges,
architecture respectÃ©e, UI minimaliste fond blanc, angles droits,
trois uploads, un prompt, gÃ©nÃ©ration dâ€™images, code propre,
et aucune icÃ´ne IA classique.â€